version: v1.0
name: Initial Pipeline with maven
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Basic tests
    task:
      jobs:
        - name: Run tests
          commands:
            - checkout
            - curl https://gist.githubusercontent.com/rakesh-vardan/c1dcf6531b826fad91f18c285d566a71/raw/ad90a18fe5e70f2d6aea06621b76d6e0329a4aab/docker-compose-sel.yml > docker-compose.yaml
            - docker-compose up -d
            - docker-compose ps
            - mvn clean install -DsuiteXmlFile=testng.xml
      epilogue:
        always:
          commands:
            - test-results publish target/surefire-reports/junitreports/TEST-org.lambdatest.SeleniumTest.xml
